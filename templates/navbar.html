<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navbar</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
</head>

<body class="navbar-page">

    <!-- ðŸ”· Floating Logo Bubble -->
    <div class="floating-logo nav-logo" id="logoBubble">
        <a href="/" title="Home">
            <img src="{{ url_for('static', filename='images/horizon_logo.png') }}" alt="Horizon Travels Logo">
        </a>
    </div>

    <!-- ðŸ” Floating Hamburger (mobile only) -->
    <div class="floating-hamburger" onclick="toggleMobileNav()">
        <i class='bx bx-menu'></i>
    </div>

    <!-- ðŸ§­ Desktop Navbar (shown only above 768px) -->
    <nav class="clean-navbar">
        <div class="icon-links">
            {% if show_minimal_nav %}
            <a href="/" class="nav-icon" data-label="Home"><i class='bx bxs-home'></i></a>
            <button class="nav-icon user-toggle" data-label="User" onclick="toggleSecondaryNavbar()">
                <i class='bx bxs-user'></i>
            </button>
            {% else %}
            <a href="/" class="nav-icon" data-label="Home"><i class='bx bxs-home'></i></a>
            <a href="/dashboard" class="nav-icon" data-label="Dashboard"><i class='bx bxs-dashboard'></i></a>
            <a href="/booking" class="nav-icon" data-label="Book"><i class='bx bxs-plane-alt'></i></a>
            <a href="/my-bookings" class="nav-icon" data-label="Trips"><i class='bx bxs-receipt'></i></a>
            {% if cart_count > 0 %}
            <a href="/cart" class="nav-icon" data-label="Cart">
                ðŸ›’ <span class="cart-badge">{{ cart_count }}</span>
            </a>
            {% endif %}
            {% if session.get('user_id') %}
            <a href="/logout" class="nav-icon" data-label="Logout"><i class='bx bxs-log-out'></i></a>
            {% else %}
            <a href="/login" class="nav-icon" data-label="Login"><i class='bx bxs-lock'></i></a>
            <a href="/register" class="nav-icon" data-label="Register"><i class='bx bxs-user-plus'></i></a>
            {% endif %}
            {% endif %}
        </div>

    </nav>
    <!-- ðŸŸ¦ Secondary Navbar (User Login/Register) -->
    {% if show_minimal_nav %}
    <nav class="clean-navbar secondary-navbar" id="secondaryNavbar">
        <div class="icon-links">
            <a href="/login" class="nav-icon" data-label="Login"><i class='bx bxs-lock'></i></a>
            <a href="/register" class="nav-icon" data-label="Register"><i class='bx bxs-user-plus'></i></a>
        </div>
    </nav>
    {% endif %}


    <!-- ðŸ“± Mobile Nav (shown when hamburger clicked) -->
    <div id="mobileNav">
        {% if show_minimal_nav %}
        <a href="/" class="nav-icon" data-label="Home"><i class='bx bxs-home'></i></a>
        <a href="/login" class="nav-icon" data-label="Login"><i class='bx bxs-lock'></i></a>
        <a href="/register" class="nav-icon" data-label="Register"><i class='bx bxs-user-plus'></i></a>
        {% else %}
        <a href="/" class="nav-icon" data-label="Home"><i class='bx bxs-home'></i></a>
        <a href="/dashboard" class="nav-icon" data-label="Dashboard"><i class='bx bxs-dashboard'></i></a>
        <a href="/booking" class="nav-icon" data-label="Book"><i class='bx bxs-plane-alt'></i></a>
        <a href="/my-bookings" class="nav-icon" data-label="Trips"><i class='bx bxs-receipt'></i></a>
        {% if session.get('user_id') %}
        <a href="/logout" class="nav-icon" data-label="Logout"><i class='bx bxs-log-out'></i></a>
        {% else %}
        <a href="/login" class="nav-icon" data-label="Login"><i class='bx bxs-lock'></i></a>
        <a href="/register" class="nav-icon" data-label="Register"><i class='bx bxs-user-plus'></i></a>
        {% endif %}
        {% endif %}
    </div>

    <!-- ðŸ§  JS Behavior -->
    <script>
        function toggleSecondaryNavbar() {
            const nav = document.getElementById("secondaryNavbar");
            nav?.classList.toggle("show");
        }

        function toggleMobileNav() {
            const nav = document.getElementById("mobileNav");
            nav.classList.toggle("show");
        }


        let lastScrollTop = 0;
        const navbar = document.querySelector('.clean-navbar');
        const logoBubble = document.getElementById('logoBubble');

        window.addEventListener('scroll', function () {
            const currentScroll = window.pageYOffset || document.documentElement.scrollTop;

            if (currentScroll > lastScrollTop && currentScroll > 80) {
                // Scroll down
                navbar?.classList.add('nav-hidden');
                logoBubble?.classList.add('nav-hidden');
            } else {
                // Scroll up
                navbar?.classList.remove('nav-hidden');
                logoBubble?.classList.remove('nav-hidden');
            }

            lastScrollTop = currentScroll <= 0 ? 0 : currentScroll;
        });
    </script>
</body>

</html>